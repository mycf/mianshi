这里是官方的书籍
https://developer.aliyun.com/ebook/36?spm=a2c6h.26392470.ebook-read.55.6da71513bjwFLU

# 简介
更易于构建云原生应用的动态**服务发现**、**配置管理**和**服务管理**平台。

[官网]: https://nacos.io/

## 优势
**易用**：简单的数据模型，标准的restfuApi，易用的控制台，丰富的使用文档
**稳定**：99.9%高可用
**实时**：
**规模**：

# Nacos 一致性协议

## 从服务注册来看

服务发现注册中心，在当前微服务体系下，是十分重要的组件，服务之间感知对方服务的当前可正常提供服务的实例信息，必须从服务发现注册中心进行获取，因此对于服务注册发现中心组件的可用性，提出了很高的要求，需要在任何场景下，尽最大可能保证服务注册发现能力可以对外提供服务，同时 Nacos 的服务注册发现设计，采取了心跳可自动完成服务数据补偿的机制。如果数据丢失的话，是可以通过该机制快速弥补数据丢失。

因此，**为了满足服务发现注册中心的可用性**，强一致性的共识算法这里就不太合适了，因为强一致性共识算法能否对外提供服务是有要求的，如果当前集群可用的节点数没有过半的话，整个算法直接“罢工”，而最终一致共识算法的话，更多保障服务的可用性，并且能够保证在一定的时间内各个节点之间的数据能够达成一致。

上述的都是针对于 Nacos 服务发现注册中的**非持久化服务**而言 (即需要客户端上报心跳进行服务实例续约)。而对于 Nacos 服务发现注册中的持久化服务，因为所有的数据都是直接使用调用 Nacos服务端直接创建，因此需要由 Nacos 保障数据在各个节点之间的强一致性，故而针对此类型的服务数据，选择了强一致性共识算法来保障数据的一致性。

## 从配置管理来看

配置数据，是直接在 Nacos 服务端进行创建并进行管理的，必须保证大部分的节点都保存了此配置数据才能认为配置被成功保存了，否则就会丢失配置的变更，如果出现这种情况，问题是很严重的，如果是发布重要配置变更出现了丢失变更动作的情况，那多半就要引起严重的现网故障了，因此**对于配置数据的管理，是必须要求集群中大部分的节点是强一致的**，而这里的话只能使用强一致性共识算法。


# Nacos 服务发现
Nacos 1.0.0 介绍的另外一个新特性是: 临时实例和持久化实例。在定义上区分临时实例和持久化实例的关键是健康检查的方式。**临时实例使用客户端上报模式**，而**持久化实例使用服务端反向探测模式**。临时实例需要能够自动摘除不健康实例，而且无需持久化存储实例，那么这种实例就适用于类 Gossip 的协议。右边的持久化实例使用服务端探测的健康检查方式，因为客户端不会上报心跳.那么自然就不能去自动摘除下线的实例。




![image.png](https://gitee.com/ycfan/images/raw/master/img/20231213130232.png)
